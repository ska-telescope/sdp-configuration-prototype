{
   "$schema":"http://json-schema.org/draft-04/schema#",
   "title":"Configure Scan",
   "description":"Schema for Configure Scan",
   "version":"1.0.0",
   "type":"object",
   "properties":{
      "id":{
         "type":"string",
         "description":"Primary PB Id, SBI-[date]-[project]-*",
         "pattern":"^PB_[0-9]{8}_[a-z|A-Z]+-.*$"
      },
      "sbi_id":{
         "type":"string",
         "description":"Primary SBI Id, SBI-[date]-[project]-*",
         "pattern":"^SBI-[0-9]{8}-[a-z|A-Z]+-.*$"
      },
      "type":{
         "type":"string"
      },
      "workflow":{
         "type":"object",
         "properties":{
            "id":{
               "type":"string"
            },
            "version":{
               "type":"string"
            }
         },
         "required":[
            "id",
            "version"
         ]
      },
      "parameters":{
         "type":"object",
         "properties":{
            "num_stations":{
               "type":"integer"
            },
            "num_channels":{
               "type":"integer"
            },
            "num_polarisations":{
               "type":"integer"
            },
            "freq_start_hz":{
               "type":"number"
            },
            "freq_end_hz":{
               "type":"number"
            },
            "fields":{
               "type":"object",
               "properties":{
                  "0":{
                     "type":"object",
                     "properties":{
                        "system":{
                           "type":"string"
                        }
                     },
                     "required":[
                        "system"
                     ]
                  },
                  "1":{
                     "type":"object",
                     "properties":{
                        "system":{
                           "type":"string"
                        }
                     },
                     "required":[
                        "system"
                     ]
                  }
               },
               "required":[
                  "0",
                  "1"
               ]
            }
         },
         "required":[
            "num_stations",
            "num_channels",
            "num_polarisations",
            "freq_start_hz",
            "freq_end_hz",
            "fields"
         ]
      },
      "scan_parameters":{
         "type":"object",
         "properties":{
            "scan_id":{
               "type":"integer"
            },
            "field_id":{
               "type":"integer"
            },
            "interval_ms":{
               "type":"integer"
            }
         },
         "required":[
            "scan_id",
            "field_id",
            "interval_ms"
         ]
      }
   },
   "required":[
      "id",
      "sbi_id",
      "type",
      "workflow",
      "parameters",
      "scan_parameters"
   ]
}